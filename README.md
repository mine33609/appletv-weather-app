# 🍎 Apple TV 気温予測アプリ

Apple TV専用に最適化された気温予測Webアプリケーションです。リビングルームの大画面テレビで、リモコン操作により快適に天気予報を確認できます。

![Apple TV](https://img.shields.io/badge/Apple%20TV-Optimized-black?style=for-the-badge&logo=apple)
![tvOS](https://img.shields.io/badge/tvOS-Compatible-blue?style=for-the-badge)
![Remote](https://img.shields.io/badge/Remote-Control-green?style=for-the-badge)

---

## ✨ 主な機能

### 🎮 **Apple TV Remote対応**
- **十字キー（←→↑↓）**: 要素間の移動
- **タッチパッド/Enterキー**: 選択・決定
- **Menuキー/Escape**: 戻る・キャンセル
- **フォーカスハイライト**: 現在選択中の要素を明確に表示

### 📺 **大画面最適化UI**
- **超大型フォント**: 3メートル離れた距離でも視認可能
- **16:9 比率**: 横長画面に最適化されたレイアウト
- **Safe Area対応**: テレビの表示領域を考慮した配置
- **高コントラスト**: 暗い背景に明るい文字で視認性抜群

### 🌡️ **リアルタイム気象情報**
- **現在の気温**: 超大型表示（12rem）で一目でわかる
- **湿度・風速・降水量**: 重要な気象データを表示
- **天気アイコン**: 現在の天気状態を視覚的に表示

### 📊 **時間別予測グラフ**
- **過去24時間**: 実測データを青色の実線で表示
- **未来24/48時間**: 予測データを黄色の点線で表示
- **降水量の重ね書き**: 棒グラフで降水量を同時表示
- **現在位置表示**: 赤い縦線で「現在」を明確に表示

### 🔄 **自動更新機能**
- **5分ごとに自動更新**: 常に最新の気象データを表示
- **バックグラウンド更新**: 画面表示を妨げない更新

### 🏙️ **日本主要都市対応**
- 東京、大阪、名古屋、札幌、福岡、仙台、広島、京都、那覇、岡山
- **都市記憶機能**: 最後に選択した都市を自動的に保存

---

## 🚀 セットアップ方法

### **方法1: Apple TVのSafariで開く**

1. **ファイルをWebサーバーにアップロード**
   - Netlify、Vercel、GitHub Pagesなどの無料ホスティングサービスを利用
   - または自前のWebサーバーにアップロード

2. **Apple TVでSafariを開く**
   - App Storeから「Safari」アプリをダウンロード（無料）
   - Safariを起動

3. **URLを入力**
   - リモコンで公開URLを入力
   - または、iPhoneのSafariから「共有」→「Apple TV」で送信

4. **ブックマークに追加**（推奨）
   - すぐにアクセスできるようブックマーク登録

### **方法2: AirPlayミラーリング**

1. **MacまたはiPhoneでブラウザを開く**
   - `index.html`をブラウザで開く

2. **AirPlayでミラーリング**
   - Macの場合: コントロールセンター → 画面ミラーリング → Apple TV
   - iPhoneの場合: コントロールセンター → 画面ミラーリング → Apple TV

3. **フルスクリーンモードに**
   - ブラウザをフルスクリーンで表示

> **注意**: AirPlayは遅延が発生する可能性があります。最適なパフォーマンスのため、方法1を推奨します。

---

## 🎮 操作方法

### **基本操作**

| リモコンボタン | 機能 |
|--------------|------|
| **←** 左 | 前の要素にフォーカス移動 |
| **→** 右 | 次の要素にフォーカス移動 |
| **↑** 上 | 前の要素にフォーカス移動（ドロップダウン内） |
| **↓** 下 | 次の要素にフォーカス移動（ドロップダウン内） |
| **タッチパッド** クリック | 選択・決定 |
| **Enter** キー | 選択・決定 |
| **Menu** ボタン | ドロップダウンを閉じる |

### **操作フロー**

1. **都市選択**
   - 右上の「都市を選択」ボタンにフォーカス
   - タッチパッドクリックでドロップダウンを開く
   - ↑↓キーで都市を選択
   - タッチパッドクリックで決定

2. **予測時間の変更**
   - 「24時間予測」または「48時間予測」ボタンにフォーカス
   - タッチパッドクリックで切り替え

3. **グラフの確認**
   - グラフは自動的に表示されます
   - 過去と未来のデータが一つのグラフに統合されています

---

## 📁 ファイル構成

```
weather-app/
├── index.html          # メインHTMLファイル
├── css/
│   └── style.css      # Apple TV最適化スタイルシート
├── js/
│   └── main.js        # アプリケーションロジック
└── README.md          # このファイル
```

---

## 🔧 技術仕様

### **使用技術**
- **HTML5**: セマンティックマークアップ
- **CSS3**: カスタムプロパティ、グラデーション、アニメーション
- **JavaScript (ES6+)**: クラスベース設計
- **Chart.js 4.4.0**: グラフ描画ライブラリ
- **Open-Meteo API**: 気象データ取得（無料・認証不要）

### **対応ブラウザ**
- ✅ Apple TV Safari (tvOS 13以降推奨)
- ✅ Safari (macOS/iOS)
- ✅ Chrome (Windows/Mac/Android)
- ✅ Firefox (Windows/Mac)
- ✅ Edge (Windows/Mac)

### **画面解像度**
- **最適解像度**: 1920x1080 (Full HD)
- **対応解像度**: 1280x720 ~ 3840x2160 (4K)
- **アスペクト比**: 16:9

### **パフォーマンス**
- **初回ロード**: < 2秒
- **データ更新**: < 1秒
- **自動更新間隔**: 5分
- **メモリ使用量**: < 50MB

---

## 🎨 デザインの特徴

### **カラーパレット**
- **プライマリ**: 紫×青のグラデーション (#667eea → #764ba2)
- **セカンダリ**: ピンク×赤のグラデーション (#f093fb → #f5576c)
- **背景**: ダークブルー (#0a0e27)
- **フォーカス色**: シアン (#00d4ff)

### **タイポグラフィ**
- **フォント**: Noto Sans JP (Google Fonts)
- **現在気温**: 12rem (192px)
- **見出し**: 4.5rem (72px)
- **本文**: 1.5rem (24px)

### **アニメーション**
- **フェードイン**: 要素の出現時
- **フロート**: 天気アイコンの浮遊効果
- **スケール**: フォーカス時の拡大効果
- **グロー**: フォーカスハイライトの発光効果

---

## 📊 データ仕様

### **取得データ**
- **気温**: 1時間ごとの気温（°C）
- **降水量**: 1時間ごとの降水量（mm）
- **湿度**: 相対湿度（%）
- **風速**: 地上10mの風速（m/s）
- **天気コード**: WMO天気コード

### **データ範囲**
- **過去**: 24時間の実測データ
- **未来**: 24時間または48時間の予測データ
- **更新頻度**: 5分ごと自動更新

### **API仕様**
- **提供元**: Open-Meteo
- **認証**: 不要（完全無料）
- **レート制限**: 10,000リクエスト/日
- **タイムゾーン**: Asia/Tokyo

---

## 🛠️ カスタマイズ

### **都市の追加**

`js/main.js`の`cities`オブジェクトに都市を追加：

```javascript
this.cities = {
    // ... 既存の都市
    mycity: { name: 'マイシティ', lat: 35.0000, lon: 135.0000 }
};
```

`index.html`にドロップダウンオプションを追加：

```html
<div class="city-option focusable" data-city="mycity" data-lat="35.0000" data-lon="135.0000" tabindex="12">
    <i class="fas fa-map-pin"></i>マイシティ
</div>
```

### **自動更新間隔の変更**

`js/main.js`の`startAutoRefresh()`メソッド：

```javascript
// 5分 → 10分に変更
this.autoRefreshInterval = setInterval(() => {
    this.loadWeatherData();
}, 10 * 60 * 1000); // 10分 = 600,000ミリ秒
```

### **カラーテーマの変更**

`css/style.css`の`:root`変数を編集：

```css
:root {
    --primary-gradient: linear-gradient(135deg, #YOUR_COLOR1 0%, #YOUR_COLOR2 100%);
    --focus-color: #YOUR_FOCUS_COLOR;
}
```

---

## ⚠️ トラブルシューティング

### **「データの取得に失敗しました」と表示される**

**原因**: インターネット接続の問題またはAPI障害

**解決方法**:
1. Apple TVのWi-Fi接続を確認
2. 「再試行」ボタンをクリック
3. ルーターを再起動
4. 数分後に再度試行

### **リモコンで操作できない**

**原因**: フォーカスが正しく設定されていない

**解決方法**:
1. ページを再読み込み（Command+R）
2. タッチパッドをタップしてフォーカスを有効化
3. ブラウザのコンソールでエラーを確認

### **フォントが小さすぎる**

**原因**: テレビの解像度が高すぎる（4K以上）

**解決方法**:
1. `css/style.css`の`:root`変数を編集
2. フォントサイズを1.5倍に増やす：

```css
:root {
    --font-size-massive: 18rem; /* 12rem → 18rem */
    --font-size-huge: 6.75rem;  /* 4.5rem → 6.75rem */
}
```

### **グラフが表示されない**

**原因**: Chart.jsの読み込み失敗

**解決方法**:
1. インターネット接続を確認
2. ブラウザのキャッシュをクリア
3. CDNが利用可能か確認（console.logでエラー確認）

---

## 🌐 デプロイ方法

### **Netlifyでのデプロイ**

1. [Netlify](https://www.netlify.com/)にアクセス
2. 「Add new site」→「Deploy manually」
3. プロジェクトフォルダをドラッグ&ドロップ
4. デプロイ完了後、URLをApple TVのSafariで開く

### **Vercelでのデプロイ**

1. [Vercel](https://vercel.com/)にアクセス
2. 「Add New」→「Project」
3. GitHubリポジトリをインポート（または手動アップロード）
4. 「Deploy」をクリック

### **GitHub Pagesでのデプロイ**

1. GitHubリポジトリを作成
2. ファイルをpush
3. Settings → Pages → Source → main branch
4. 公開URLを取得

---

## 📝 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

### **使用ライブラリ**
- Chart.js: MIT License
- Font Awesome: Font Awesome Free License
- Open-Meteo API: CC BY 4.0

---

## 🎉 完成

これで、Apple TVで快適に使える気温予測アプリの完成です！

リビングルームの大画面で、家族みんなで天気予報を確認できます。

### **次のステップ**
- 📱 スマートフォン版の作成
- 🌍 世界の都市対応
- 📅 週間天気予報の追加
- 🎨 テーマカラーのカスタマイズ機能
- 📊 天気統計グラフの追加

---

**楽しいApple TVライフを！** 🍎📺
